{% extends "base_dash.html" %}

{% load static %}

{% block head %}
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/paciente/listar_consulta.css' %}">
{% endblock %}

{% block page-title %} Clinica Vision - Consultas Agendadas {% endblock %}

{% block login-header %}

    <div id="btn_header_dash">
        <nav>
            <ul>
                <li><a href="{% url 'paciente:geral-list' paciente.pk %}">VOLTAR</a></li>
                <li><a href="">LOGOUT</a></li>
            </ul>
        </nav>
    </div>

{% endblock %}

{% block content %}

    {% block title %}
    
        <h1 class="subtitle">CONSULTAS AGENDADAS</h1>
            
    {% endblock %}

    <div class="container_historico">

        {% if agendamentos %}

            {% for agendamento in agendamentos %}

                <div class="consulta-item" id="listar-consulta-bg">

                    <p>Paciente: {{ agendamento.id_paciente }}</p>

                    <p>Especialidade: {{ agendamento.id_especialidade }}<br>
                        Médico(a): Dr(a) {{ agendamento.id_medico }}</p>

                    <p>Data: {{ agendamento.data_cons }}<br>
                        Hora: {{ agendamento.hora_cons }}</p>
                    
                    <a href="{% url 'paciente:alterar-consulta' agendamento.pk %}">
                        <img class="icones_menores" src="{% static 'img/dashboard/editar_icon.svg' %}" alt="ícone-excluir">
                    </a>

                    <a href="#" class="custom-modal-link" data-toggle="modal" data-target="#myModal-Cancelar">
                        <img class="icones_menores" src="{% static 'img/dashboard/img_icone_excluir.svg' %}" alt="ícone-excluir">
                    </a>

                                    <!-- Modal - Cancelar Consulta-->
                    <div class="modal fade" id="myModal-Cancelar" role="dialog">
                        <div class="modal-dialog">
                        <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h1 class="title">CANCELAR AGENDAMENTO</h1>
                                </div>
                                <div class="modal-body">
                                    <div class="dados-consulta">

                                        <form method="POST" action="{% url 'paciente:cancelar-consulta' agendamento.pk %}">

                                            <p>Data: {{ agendamento.data_cons }}</p>
                                            <p>Hora: {{ agendamento.hora_cons }}</p>
                                            <p>Especialidade: {{ agendamento.id_especialidade }}</p>
                                                                            
                                            {% csrf_token %}
                                            <div class="form-field">
                                                <label for="motivo">Motivo do cancelamento:</label><br>
                                                <textarea id="motivo" rows="10" name="motivo" cols="33"></textarea>
                                            </div>
                                            <div class="form-button">
                                                <button type="submit">CONFIRMAR CANCELAMENTO</button>
                                            </div>
                                        </form>
                            
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>

            {% endfor %}

        {% endif %}

{% endblock %}